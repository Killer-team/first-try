#include <SFML/Graphics.hpp>
#include <SFML/Audio.hpp>
#include <iostream>
using namespace std;
using namespace sf;

int main()
{
    RenderWindow window1(VideoMode(800, 561), "Mario");
    window1.setFramerateLimit(15);
    Texture background, mario, coin, sonic1;
    background.loadFromFile("images (1).jpg");
    mario.loadFromFile("output-onlinepngtools (2).png");
    coin.loadFromFile("output-onlinepngtools (4).png");
    Sprite mario1(mario), background1(background), coin1(coin);
    mario1.setPosition(10, 380);
    coin1.setPosition(500, 270);
    Sound coin_sound;
    SoundBuffer sound;
    sound.loadFromFile("Mario-coin-sound.wav");
    coin_sound.setBuffer(sound);
    
    const float gravity = 45, ground=380, jumpf= -180 ;

    int x = 1;

    enum {down, up, left, right};

    Vector2i source(1, right);

    while (window1.isOpen())
    {
        Event event;
        while (window1.pollEvent(event))
        {
            if (event.type == Event::Closed)
                window1.close();

        }
        if (Keyboard::isKeyPressed(Keyboard::Right))
        {
            mario1.move(15.0f, 0.0f);
            source.y = right;
            source.x++;
            if (source.x * 100 >= mario.getSize().x)
                source.x = 0;
        }
        if (Keyboard::isKeyPressed(Keyboard::Left))
        {
            mario1.move(-15.0f, 0.0f);
            source.y = left;
            source.x++;
            if (source.x * 100 >= mario.getSize().x)
                source.x = 0;
        }
        if (Keyboard::isKeyPressed(Keyboard::Up))
        {
            if (mario1.getPosition().y == ground )
                mario1.move(0.0f, jumpf);
        }

        if (mario1.getPosition().y < ground)
        {
            mario1.move(0, gravity);
        }
        
        coin1.setTextureRect(IntRect(x*58, 0, 58, 64));
            x++;
        if (x >= 6)
            x = 1;

        mario1.setTextureRect(IntRect(source.x * 100, source.y * 150, 100, 150));

        if (mario1.getGlobalBounds().intersects(coin1.getGlobalBounds()))
        {
            coin_sound.play();
            coin1.setPosition(-100, -100);
        }
        window1.clear();
        window1.draw(background1);
        window1.draw(coin1);
        window1.draw(mario1);
        window1.display();
    }
}
