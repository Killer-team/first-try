#include <SFML/Graphics.hpp>
#include <SFML/Audio.hpp>
#include <iostream>
using namespace std;
using namespace sf;

int main()
{
    RenderWindow window1(VideoMode(800, 561), "Super Sonic");
    window1.setFramerateLimit(15);
    Texture texture, texture1, coin, sonic1;
    texture.loadFromFile("output-onlinepngtools (2).png");
    texture1.loadFromFile("images (1).jpg");
    coin.loadFromFile("output-onlinepngtools (4).png");
    sonic1.loadFromFile("output-onlinepngtools (5).png");
    Sprite sprite(texture), sprite1(texture1), coin1(coin), sonic(sonic1);
    sprite.setPosition(10, 400);
    coin1.setPosition(500, 270);
    sonic.setPosition(500, 380);
    Sound sound1;
    SoundBuffer sound;
    sound.loadFromFile("Mario-coin-sound.wav");
    sound1.setBuffer(sound);
    
    const float gravity = 45, ground=380, jumpf= -180 ;

    int x = 1, y=1;

    enum {down, up, left, right};

    Vector2i source(1, right);

    while (window1.isOpen())
    {
        Event event;
        while (window1.pollEvent(event))
        {
            if (event.type == Event::Closed)
                window1.close();

        }


        if (Keyboard::isKeyPressed(Keyboard::Right))
        {
            sprite.move(15.0f, 0.0f);
            source.y = right;
            source.x++;
            if (source.x * 100 >= texture.getSize().x)
                source.x = 0;
        }
        if (Keyboard::isKeyPressed(Keyboard::Left))
        {
            sprite.move(-15.0f, 0.0f);
            source.y = left;
            source.x++;
            if (source.x * 100 >= texture.getSize().x)
                source.x = 0;
        }
        if (Keyboard::isKeyPressed(Keyboard::Up))
        {
            if (sprite.getPosition().y == ground )
            sprite.move(0.1f, jumpf);
        }

        if (sprite.getPosition().y < ground)
        {
            sprite.move(0, gravity);
        }
        
        coin1.setTextureRect(IntRect(x*58, 0, 58, 64));
            x++;
        if (x >= 6)
            x = 1;

        sprite.setTextureRect(IntRect(source.x * 100, source.y * 150, 100, 150));

        if (sprite.getGlobalBounds().intersects(coin1.getGlobalBounds()))
        {
            sound1.play(); 
            coin1.setPosition(-100, -100);
        }

        sonic.setTextureRect(IntRect(y*100, 125, 100, 105));
        y++;
        if (y >= 9)
            y = 1;

        window1.clear();
        window1.draw(sprite1);
        window1.draw(sonic);
        window1.draw(coin1);
        window1.draw(sprite);
        window1.display();
    }
}
